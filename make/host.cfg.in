#
#  $Id$
#
# OS-specific configuration 
#
# Author: Ralf Corsepius (corsepiu@faw.uni-ulm.de) 97/11/08
#
# Derived from rtems/c/make/os/*.cfg in previous RTEMS version.
#

RTEMS_HOST = @RTEMS_HOST@

#
# Stuff to clean and clobber for the OS
#

CLEAN_OS =
CLOBBER_OS = *~ *.bak TAGS tags

SHELL=/bin/sh
ECHO=echo

CAT=@CAT@
RM=@RM@ -f
CP=@CP@
MV=@MV@
LN=@LN@
MKDIR=@MKDIR@
CHMOD=@CHMOD@
SED=@SED@
M4=@M4@

# Global tools
PACKHEX=$(PROJECT_TOOLS)/packhex

INSTALL=$(PROJECT_TOOLS)/install-if-change
INSTALL_VARIANT=$(PROJECT_TOOLS)/install-if-change -V "$(LIB_VARIANT)"

# FIXME: HACK for a bug in cygwin-hosted egcs which returns a mixture
#        of '\\' and '/' as path separators.
#        Should be removed as soon as this bug is fixed in egcs.
GCCSED = @GCCSED@

# ksh (or bash) is used by some shell scripts; ref build-tools/scripts/Makefile
#
#  Must have shell functions.  Some ksh's core dump mysteriously and 
#  unreliably on RTEMS shell scripts.  bash appears to be the most
#  reliable but late model ksh's are usually OK.
KSH=@KSH@

#
# RCS support
#
RCS_CLEAN=$(PROJECT_TOOLS)/rcs-clean

#
#  Rule to install a shell script with the proper shell to run it.
#

# when debugging, one may want to save the previous incarnation of the
# installed script.  Replace the first line of this rule to do this.
#
#	-$(RM) $@.old
#	-$(MV) $@ $@.old >/dev/null 2>&1

define make-script
	-$(RM) $@
	$(SED) -e '1,1s?^#!KSHELL?#!$(KSH)?' \
               -e '1,1s?^#!SHELL?#!$(SHELL)?' < $< > $@
	$(CHMOD) 0555 $@
endef

INSTBINFLAGS  = -m 0755
INSTDATAFLAGS = -m 0644
INSTLIBFLAGS  = -m 0644 
INSTDIRFLAGS  = -m 0755 -d
INSTINCFLAGS  = -m 0644
