#
#  Config file for a PowerPC MPC860-based MBX860-005b card.
#

#
#  All MBX8xx configurations share the same base file, only a few
#  parameters differ.
#  

RTEMS_MBX_MODEL=mbx860_005b

# The 860_005b has 16M ram : org = 0x0, l = 16M 
MBX8xx_LDFLAGS=-Wl,--defsym -Wl,HeapSize=0x100000

RTEMS_PPC_EXCEPTION_PROCESSING_MODEL=new

include $(RTEMS_ROOT)/make/custom/mbx8xx.cfg
define make-target-options
        @echo "#ifdef mpc$(CPU_TYPE)"                       >>$@
        @echo "#undef mpc$(CPU_TYPE)"                       >>$@
        @echo "#endif"                                      >>$@
        @echo "#define mpc$(CPU_TYPE) 1"                    >>$@
        @echo                                               >>$@
	@echo "#define NVRAM_CONFIGURE 0"                   >>$@
	@echo "#define UARTS_USE_TERMIOS 1"                 >>$@
	@echo "#define CONSOLE_MINOR SMC1_MINOR"            >>$@
	@echo "#define UARTS_IO_MODE 0"                     >>$@
	@echo "#define UARTS_USE_INTERRUPTS 0"              >>$@
	@echo "#define PRINTK_MINOR SMC1_MINOR"             >>$@
	@echo "#define PRINTK_IO_MODE 0"                    >>$@
        @echo "/*#define EPPCBUG_SMC1 0*/"                  >>$@
        @echo "/* #define EPPCBUG_VECTORS 1*/"              >>$@
        @echo "#define INSTRUCTION_CACHE_ENABLE 1"          >>$@
        @echo "#define DATA_CACHE_ENABLE 1"                 >>$@
        @echo                                               >>$@
        @echo "#define PPC_VECTOR_FILE_BASE 0x0000"         >>$@
        @echo "/*#define PPC_USE_DATA_CACHE 1*/"                >>$@
        @echo                                               >>$@
endef
