#
#  Config file for LPC2478 (QVGA Base Board from Embedded Artists).
#
#  $Id$
#

include $(RTEMS_ROOT)/make/custom/default.cfg

RTEMS_CPU = arm
RTEMS_BSP_FAMILY = lpc24xx

CPU_CFLAGS = -mcpu=arm7tdmi -mstructure-size-boundary=8 -mapcs-frame \
	-Wextra -Wno-unused -Wpointer-arith -Wcast-qual -Wconversion -Wmissing-prototypes

CFLAGS_OPTIMIZE_V = -Os -g

define bsp-post-link
	$(OBJCOPY) -O binary '$@' '$(basename $@).bin'
	gzip -f -9 '$(basename $@).bin'
	# mkimage -A arm -O rtems -T kernel -C gzip \
	#     -a a0000000 -e a0000000 -name '$(notdir $@)' \
	#     -d '$(basename $@).bin.gz' '$(basename $@).img'
	$(default-bsp-post-link)
endef
