#! /bin/sh
#
#  Ctags wrapper
#
#  Invokes the version shipped with src2html for C.
#  Invokes the Ada patched GNU Emacs version for Ada.
#
#  $Id$

TOOLSBASE=/usr1/rtems/rtemsdoc-work/tools/src2html

if [ ! -f ${TOOLSBASE}/ctags-new ]; then
  echo Can not find ${TOOLSBASE}/ctags-new for C programs.
  exit 1
fi

if [ ! -f ${TOOLSBASE}/ctags ]; then
  echo Can not find ${TOOLSBASE}/ctags for Ada programs.
  exit 1
fi

cfiles=`ls -1 $1/*.[ch] $1/*.inl 2>/dev/null | grep -v "/no-"`
adafiles=`ls -1 $1/*.ad[sb] 2>/dev/null`

if [ "x${cfiles}" != x ] ; then
  ${TOOLSBASE}/ctags-new -d -t -w -y ${cfiles}
  #mv tags tags.c
fi

if [ "x${adafiles}" != x ] ; then
  ${TOOLSBASE}-src/ctags -d -t -x --no-warn ${adafiles} 
fi 
# cat tags
#mv tags tags.ada
#
#cat tags.c tags.ada 
#rm -f tags.c tags.ada
