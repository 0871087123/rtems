#
# spec file for package i686-pc-cygwin-w32api
# 

%define w32api_version @W32API_VERS@
%define w32api_rpmvers %{expand: %(echo @W32API_VERS@ | tr - _)} 

%define __os_install_post       %{nil}

Distribution: Linux
Name:         i686-pc-cygwin-w32api
Release:      @W32API_RPMREL@
License:      Red Hat Inc.
Group:        Cygwin
Provides:     i686-pc-cygwin-w32api

Autoreqprov:  	off
Prefix:		%{_prefix}
BuildRoot:	@RPM_BUILD_ROOT@
BuildArch:	noarch

Version:        %w32api_rpmvers
Summary:      	Cygwin's w32api libs
Source0:	ftp://cygwin.com/pub/cygwin/release/w32api/w32api-%{w32api_version}.tar.bz2

NoSource:	0

%description
Cygwin's w32api libs

%prep
%setup -c

%build
  rm -rf i686-pc-cygwin
  mkdir -p i686-pc-cygwin/sys-root
  cp -a usr i686-pc-cygwin/sys-root

  # Setup lib and include (Required by gcc < 3.4)
  mkdir -p i686-pc-cygwin/lib
  cp -a i686-pc-cygwin/sys-root/usr/lib/* i686-pc-cygwin/lib
  mkdir -p i686-pc-cygwin/include
  cp -a i686-pc-cygwin/sys-root/usr/include/* i686-pc-cygwin/include

%install
  rm -rf $RPM_BUILD_ROOT
  mkdir -p $RPM_BUILD_ROOT%{_prefix}
  cp -a i686-pc-cygwin $RPM_BUILD_ROOT%{_prefix}

%clean
  rm -rf $RPM_BUILD_ROOT

%package libs
Group: Development/Tools/Cygwin
Summary: i686-pc-cygwin w32api libs for gcc < 3.4
AutoReqProv: No

%description libs
Cygwin w32api libs or gcc < 3.4

%files libs
%defattr(-,root,root,-)
%dir %{_prefix}/i686-pc-cygwin
%{_prefix}/i686-pc-cygwin/include
%{_prefix}/i686-pc-cygwin/lib

%package sys-root
Group: Development/Tools/Cygwin
Summary: i686-pc-cygwin w32api libs for gcc >= 3.4
AutoReqProv: No

%description sys-root
Cygwin w32api libs for gcc >= 3.4

%files sys-root
%defattr(-,root,root,-)
%dir %{_prefix}/i686-pc-cygwin
%{_prefix}/i686-pc-cygwin/sys-root
